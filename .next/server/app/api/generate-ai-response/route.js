"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate-ai-response/route";
exports.ids = ["app/api/generate-ai-response/route"];
exports.modules = {

/***/ "firebase-admin/app":
/*!*************************************!*\
  !*** external "firebase-admin/app" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("firebase-admin/app");

/***/ }),

/***/ "firebase-admin/auth":
/*!**************************************!*\
  !*** external "firebase-admin/auth" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("firebase-admin/auth");

/***/ }),

/***/ "firebase-admin/firestore":
/*!*******************************************!*\
  !*** external "firebase-admin/firestore" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("firebase-admin/firestore");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@14.1.0_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-ai-response%2Froute&page=%2Fapi%2Fgenerate-ai-response%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-ai-response%2Froute.ts&appDir=%2FUsers%2Fjanily%2FDesktop%2Fdev%2Frepo-copilot-landingpage%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjanily%2FDesktop%2Fdev%2Frepo-copilot-landingpage&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.1.0_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-ai-response%2Froute&page=%2Fapi%2Fgenerate-ai-response%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-ai-response%2Froute.ts&appDir=%2FUsers%2Fjanily%2FDesktop%2Fdev%2Frepo-copilot-landingpage%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjanily%2FDesktop%2Fdev%2Frepo-copilot-landingpage&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@14.1.0_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/.pnpm/next@14.1.0_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@14.1.0_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_janily_Desktop_dev_repo_copilot_landingpage_app_api_generate_ai_response_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate-ai-response/route.ts */ \"(rsc)/./app/api/generate-ai-response/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate-ai-response/route\",\n        pathname: \"/api/generate-ai-response\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate-ai-response/route\"\n    },\n    resolvedPagePath: \"/Users/janily/Desktop/dev/repo-copilot-landingpage/app/api/generate-ai-response/route.ts\",\n    nextConfigOutput,\n    userland: _Users_janily_Desktop_dev_repo_copilot_landingpage_app_api_generate_ai_response_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/generate-ai-response/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4xLjBfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjEvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyLmpzP25hbWU9YXBwJTJGYXBpJTJGZ2VuZXJhdGUtYWktcmVzcG9uc2UlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmdlbmVyYXRlLWFpLXJlc3BvbnNlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZ2VuZXJhdGUtYWktcmVzcG9uc2UlMkZyb3V0ZS50cyZhcHBEaXI9JTJGVXNlcnMlMkZqYW5pbHklMkZEZXNrdG9wJTJGZGV2JTJGcmVwby1jb3BpbG90LWxhbmRpbmdwYWdlJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmphbmlseSUyRkRlc2t0b3AlMkZkZXYlMkZyZXBvLWNvcGlsb3QtbGFuZGluZ3BhZ2UmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDd0M7QUFDckg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9waC1jb3BpbG90LWd1aWRlLWxhbmRpbmctcGFnZS8/OWIwZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvamFuaWx5L0Rlc2t0b3AvZGV2L3JlcG8tY29waWxvdC1sYW5kaW5ncGFnZS9hcHAvYXBpL2dlbmVyYXRlLWFpLXJlc3BvbnNlL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS1haS1yZXNwb25zZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYXRlLWFpLXJlc3BvbnNlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9nZW5lcmF0ZS1haS1yZXNwb25zZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9qYW5pbHkvRGVza3RvcC9kZXYvcmVwby1jb3BpbG90LWxhbmRpbmdwYWdlL2FwcC9hcGkvZ2VuZXJhdGUtYWktcmVzcG9uc2Uvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZ2VuZXJhdGUtYWktcmVzcG9uc2Uvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@14.1.0_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-ai-response%2Froute&page=%2Fapi%2Fgenerate-ai-response%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-ai-response%2Froute.ts&appDir=%2FUsers%2Fjanily%2FDesktop%2Fdev%2Frepo-copilot-landingpage%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjanily%2FDesktop%2Fdev%2Frepo-copilot-landingpage&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate-ai-response/route.ts":
/*!***********************************************!*\
  !*** ./app/api/generate-ai-response/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   maxDuration: () => (/* binding */ maxDuration)\n/* harmony export */ });\n/* harmony import */ var _lib_firebase_firebase_admin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/firebase/firebase-admin */ \"(rsc)/./lib/firebase/firebase-admin.ts\");\n/* harmony import */ var _lib_prefixByEnv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prefixByEnv */ \"(rsc)/./lib/prefixByEnv.ts\");\n/* harmony import */ var _lib_prompt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prompt */ \"(rsc)/./lib/prompt.ts\");\n/* harmony import */ var _lib_translations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/translations */ \"(rsc)/./lib/translations.ts\");\n/* harmony import */ var firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! firebase-admin/firestore */ \"firebase-admin/firestore\");\n/* harmony import */ var firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/.pnpm/openai@4.53.2/node_modules/openai/index.mjs\");\nconst maxDuration = 60;\n\n\n\n\n\n\nconst FEATURE_TO_COST = {\n    \"overviews\": process.env.NEXT_PUBLIC_OVERVIEW_COST || \"1\",\n    \"comments\": process.env.NEXT_PUBLIC_COMMENT_COST || \"5\",\n    \"chat\": process.env.NEXT_PUBLIC_CHAT_COST || \"1\" // 添加聊天功能的成本\n};\nconst CREDITS_TIP = ({ language, key })=>{\n    return _lib_translations__WEBPACK_IMPORTED_MODULE_3__[\"default\"][language][key];\n};\nasync function POST(request) {\n    try {\n        const { token, storeUserData } = await validateAuthToken(request);\n        const { productDetails, feature, language, length, messages } = await request.json();\n        // TODO: 有会员功能后，添加判断，符合条件（会员+有选择模型）这一步跳过\n        await checkCredits(storeUserData, feature, language);\n        const { prompt, model, client } = await setupAIModelAndPrompt({\n            productDetails,\n            feature,\n            language,\n            length,\n            storeUserData,\n            messages\n        });\n        const stream = await generateAIResponse(client, model, prompt);\n        return createStreamResponse(stream, storeUserData, productDetails, feature);\n    } catch (error) {\n        return handleError(error);\n    }\n}\nasync function validateAuthToken(request) {\n    // 验证 Authorization 头\n    const authHeader = request.headers.get(\"Authorization\");\n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n        throw new Error(\"Unauthorized: Missing or invalid Authorization header\");\n    }\n    const token = authHeader.split(\" \")[1];\n    // 验证 Firebase token\n    try {\n        const decodedToken = await _lib_firebase_firebase_admin__WEBPACK_IMPORTED_MODULE_0__.auth.verifyIdToken(token);\n        // 获取用户 uid\n        const uid = decodedToken.uid;\n        // 从 Firestore 获取用户信息\n        const userDoc = await _lib_firebase_firebase_admin__WEBPACK_IMPORTED_MODULE_0__.db.collection((0,_lib_prefixByEnv__WEBPACK_IMPORTED_MODULE_1__.prefixByEnv)(\"users\")).doc(uid).get();\n        if (!userDoc.exists) {\n            throw new Error(\"User not found in database\");\n        }\n        const storeUserData = userDoc.data();\n        return {\n            token,\n            storeUserData\n        };\n    } catch (error) {\n        console.error(\"Error verifying token:\", error);\n        throw new Error(\"Unauthorized: Invalid token\");\n    }\n}\nasync function checkCredits(storeUserData, feature, language) {\n    // 检测剩余 credits 是否足够\n    if (storeUserData.credits < Number(FEATURE_TO_COST[feature])) {\n        const errorMessage = await CREDITS_TIP({\n            language,\n            key: `${feature}NeedMore`\n        });\n        throw new Error(errorMessage);\n    }\n}\nasync function generateAIResponse(client, model, prompt) {\n    return await client.chat.completions.create({\n        model: model,\n        messages: [\n            {\n                role: \"user\",\n                content: prompt\n            }\n        ],\n        stream: true\n    });\n}\nfunction createStreamResponse(stream, storeUserData, productDetails, feature) {\n    let fullResponse = \"\";\n    return new Response(new ReadableStream({\n        async start (controller) {\n            for await (const chunk of stream){\n                const content = chunk.choices[0]?.delta?.content || \"\";\n                if (content) {\n                    fullResponse += content;\n                    controller.enqueue(`data: ${JSON.stringify({\n                        content\n                    })}\\n\\n`);\n                }\n            }\n            // 保存到 Firebase\n            const userId = storeUserData.uid;\n            const email = storeUserData.email || \"\";\n            await saveToFirebase({\n                productDetails,\n                userId,\n                email,\n                aiResponse: fullResponse,\n                feature\n            });\n            // controller.enqueue(`data: [UPDATE_CREDITS]\\n\\n`)\n            controller.enqueue(\"data: [DONE]\\n\\n\");\n            controller.close();\n        }\n    }), {\n        headers: {\n            \"Content-Type\": \"text/event-stream\",\n            \"Cache-Control\": \"no-cache\",\n            \"Connection\": \"keep-alive\"\n        }\n    });\n}\nfunction handleError(error) {\n    console.error(\"Error generating AI response:\", error);\n    return new Response(JSON.stringify({\n        error: `AI response: ${error.message}`\n    }), {\n        status: 500,\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    });\n}\nasync function saveToFirebase({ productDetails, userId, email, aiResponse, feature }) {\n    try {\n        const databaseName = feature // comments or overviews\n        ;\n        const docData = {\n            userId,\n            email,\n            // 只在有 productDetails 时才添加\n            ...productDetails && {\n                productDetails\n            },\n            aiResponse: aiResponse,\n            timestamp: new Date().toISOString()\n        };\n        const docId = await _lib_firebase_firebase_admin__WEBPACK_IMPORTED_MODULE_0__.db.collection((0,_lib_prefixByEnv__WEBPACK_IMPORTED_MODULE_1__.prefixByEnv)(databaseName)).add(docData);\n        // 更新用户积分\n        const cost = Number(FEATURE_TO_COST[feature]);\n        const userRef = _lib_firebase_firebase_admin__WEBPACK_IMPORTED_MODULE_0__.db.collection((0,_lib_prefixByEnv__WEBPACK_IMPORTED_MODULE_1__.prefixByEnv)(\"users\")).doc(userId);\n        await userRef.update({\n            credits: firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_4__.FieldValue.increment(-cost)\n        });\n    } catch (e) {\n        console.error(\"save failed: \", e);\n        throw e;\n    }\n}\nasync function setupAIModelAndPrompt({ productDetails, feature, language, length, storeUserData, messages }) {\n    let prompt;\n    if (feature === \"overviews\") {\n        if (!productDetails) throw new Error(\"Product details are required for overviews\");\n        prompt = await (0,_lib_prompt__WEBPACK_IMPORTED_MODULE_2__.assembleOverviewPrompt)({\n            productDetails,\n            language\n        });\n    } else if (feature === \"comments\") {\n        if (!productDetails) throw new Error(\"Product details are required for comments\");\n        prompt = await (0,_lib_prompt__WEBPACK_IMPORTED_MODULE_2__.assembleCommentPrompt)({\n            productDetails,\n            length\n        });\n    } else if (feature === \"chat\") {\n        if (!messages) throw new Error(\"Messages are required for chat\");\n        prompt = await (0,_lib_prompt__WEBPACK_IMPORTED_MODULE_2__.assembleChatPrompt)({\n            messages,\n            language\n        });\n    }\n    const { model, modelPlatform, client } = await defaultModelAndPlatform({\n        feature\n    });\n    return {\n        prompt: prompt,\n        model,\n        modelPlatform,\n        client\n    };\n}\nconst defaultModelAndPlatform = async ({ feature })=>{\n    if (feature === \"comments\") {\n        const model = process.env.COMMENT_MODEL || \"gpt-3.5-turbo\";\n        const modelPlatform = process.env.COMMENT_MODEL_PLATFORM || \"CHATGPT\";\n        const platformKey = modelPlatform === \"DEEPSEEK\" ? process.env.DEEPSEEK_API_KEY : process.env.OPENAI_API_KEY;\n        if (!platformKey) throw new Error(\"API key is required\");\n        const client = getPlatformClient({\n            platform: modelPlatform,\n            key: platformKey\n        });\n        return {\n            model,\n            modelPlatform,\n            client\n        };\n    } else if (feature === \"chat\") {\n        const model = process.env.CHAT_MODEL || \"gpt-3.5-turbo\";\n        const modelPlatform = process.env.CHAT_MODEL_PLATFORM || \"CHATGPT\";\n        const platformKey = modelPlatform === \"DEEPSEEK\" ? process.env.DEEPSEEK_API_KEY : process.env.OPENAI_API_KEY;\n        if (!platformKey) throw new Error(\"API key is required\");\n        const client = getPlatformClient({\n            platform: modelPlatform,\n            key: platformKey\n        });\n        return {\n            model,\n            modelPlatform,\n            client\n        };\n    }\n    // default for overviews\n    const model = process.env.OVERVIEW_MODEL || \"gpt-3.5-turbo\";\n    const modelPlatform = process.env.OVERVIEW_MODEL_PLATFORM || \"CHATGPT\";\n    const platformKey = modelPlatform === \"DEEPSEEK\" ? process.env.DEEPSEEK_API_KEY : process.env.OPENAI_API_KEY;\n    if (!platformKey) throw new Error(\"API key is required\");\n    const client = getPlatformClient({\n        platform: modelPlatform,\n        key: platformKey\n    });\n    return {\n        model,\n        modelPlatform,\n        client\n    };\n};\nconst getPlatformClient = ({ platform, key })=>{\n    const lowerCase = platform.toUpperCase();\n    if (lowerCase === \"CHATGPT\") {\n        return new openai__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n            apiKey: key\n        });\n    }\n    if (lowerCase === \"DEEPSEEK\") {\n        return new openai__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n            apiKey: key,\n            baseURL: process.env.DEEPSEEK_BASE_URL\n        });\n    }\n    throw new Error(`Unsupported platform: ${platform}`);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2dlbmVyYXRlLWFpLXJlc3BvbnNlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFPLE1BQU1BLGNBQWMsR0FBRztBQUUyQjtBQUNUO0FBQ2lEO0FBQ25EO0FBR1E7QUFFMUI7QUFFNUIsTUFBTVUsa0JBQTBDO0lBQzlDLGFBQWFDLFFBQVFDLEdBQUcsQ0FBQ0MseUJBQXlCLElBQUk7SUFDdEQsWUFBWUYsUUFBUUMsR0FBRyxDQUFDRSx3QkFBd0IsSUFBSTtJQUNwRCxRQUFRSCxRQUFRQyxHQUFHLENBQUNHLHFCQUFxQixJQUFJLElBQUssWUFBWTtBQUNoRTtBQTRCQSxNQUFNQyxjQUFjLENBQUMsRUFBRUMsUUFBUSxFQUFFQyxHQUFHLEVBQXFDO0lBQ3ZFLE9BQU9YLHlEQUFZLENBQUNVLFNBQVMsQ0FBQ0MsSUFBSTtBQUNwQztBQUVPLGVBQWVDLEtBQUtDLE9BQW9CO0lBQzdDLElBQUk7UUFDRixNQUFNLEVBQUVDLEtBQUssRUFBRUMsYUFBYSxFQUFFLEdBQUcsTUFBTUMsa0JBQWtCSDtRQUN6RCxNQUFNLEVBQUVJLGNBQWMsRUFBRUMsT0FBTyxFQUFFUixRQUFRLEVBQUVTLE1BQU0sRUFBRUMsUUFBUSxFQUFFLEdBQUcsTUFBTVAsUUFBUVEsSUFBSTtRQUVsRix3Q0FBd0M7UUFDeEMsTUFBTUMsYUFBYVAsZUFBZUcsU0FBU1I7UUFFM0MsTUFBTSxFQUFFYSxNQUFNLEVBQUVDLEtBQUssRUFBRUMsTUFBTSxFQUFFLEdBQUcsTUFBTUMsc0JBQXNCO1lBQUVUO1lBQWdCQztZQUFTUjtZQUFVUztZQUFRSjtZQUFlSztRQUFTO1FBRW5JLE1BQU1PLFNBQVMsTUFBTUMsbUJBQW1CSCxRQUFRRCxPQUFPRDtRQUN2RCxPQUFPTSxxQkFBcUJGLFFBQVFaLGVBQWVFLGdCQUFnQkM7SUFDckUsRUFBRSxPQUFPWSxPQUFPO1FBQ2QsT0FBT0MsWUFBWUQ7SUFDckI7QUFDRjtBQUVBLGVBQWVkLGtCQUFrQkgsT0FBb0I7SUFDbkQs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aC1jb3BpbG90LWd1aWRlLWxhbmRpbmctcGFnZS8uL2FwcC9hcGkvZ2VuZXJhdGUtYWktcmVzcG9uc2Uvcm91dGUudHM/ZWQ2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgbWF4RHVyYXRpb24gPSA2MDtcblxuaW1wb3J0IHsgYXV0aCwgZGIgfSBmcm9tICdAL2xpYi9maXJlYmFzZS9maXJlYmFzZS1hZG1pbic7XG5pbXBvcnQgeyBwcmVmaXhCeUVudiB9IGZyb20gJ0AvbGliL3ByZWZpeEJ5RW52JztcbmltcG9ydCB7IGFzc2VtYmxlQ29tbWVudFByb21wdCwgYXNzZW1ibGVPdmVydmlld1Byb21wdCwgYXNzZW1ibGVDaGF0UHJvbXB0IH0gZnJvbSAnQC9saWIvcHJvbXB0JztcbmltcG9ydCB0cmFuc2xhdGlvbnMgZnJvbSAnQC9saWIvdHJhbnNsYXRpb25zJztcbmltcG9ydCB7IFByb2R1Y3REZXRhaWxUeXBlcyB9IGZyb20gJ0AvdHlwZXMvcHJvZHVjdCc7XG5pbXBvcnQgeyBTdG9yZVVzZXJEYXRhIH0gZnJvbSAnQC90eXBlcy91c2VyJztcbmltcG9ydCB7IEZpZWxkVmFsdWUgfSBmcm9tICdmaXJlYmFzZS1hZG1pbi9maXJlc3RvcmUnO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSc7XG5cbmNvbnN0IEZFQVRVUkVfVE9fQ09TVDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgJ292ZXJ2aWV3cyc6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX09WRVJWSUVXX0NPU1QgfHwgJzEnLFxuICAnY29tbWVudHMnOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19DT01NRU5UX0NPU1QgfHwgJzUnLFxuICAnY2hhdCc6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0NIQVRfQ09TVCB8fCAnMScgIC8vIOa3u+WKoOiBiuWkqeWKn+iDveeahOaIkOacrFxufVxuXG50eXBlIE1vZGVsUGxhdGZvcm0gPSAnQ2hhdEdQVCcgfCAnQ2xhdWRlJyB8ICdHZW1pbmknIHwgJ0RlZXBTZWVrJztcblxuaW50ZXJmYWNlIERldGVybWluZU1vZGVsSW5wdXQge1xuICBmZWF0dXJlOiBzdHJpbmc7XG4gIHByb2R1Y3REZXRhaWxzPzogUHJvZHVjdERldGFpbFR5cGVzO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgbGVuZ3RoPzogbnVtYmVyO1xuICBzdG9yZVVzZXJEYXRhOiBTdG9yZVVzZXJEYXRhO1xuICBtZXNzYWdlcz86IEFycmF5PHtyb2xlOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZ30+OyAgLy8g5re75Yqg6IGK5aSp5raI5oGv5pWw57uEXG59XG5cbmludGVyZmFjZSBNb2RlbERldGVybWluYXRpb24ge1xuICBwcm9tcHQ6IHN0cmluZztcbiAgbW9kZWw6IHN0cmluZztcbiAgbW9kZWxQbGF0Zm9ybTogc3RyaW5nO1xuICBjbGllbnQ6IGFueTtcbn1cblxuaW50ZXJmYWNlIFNhdmVUb0ZpcmViYXNlUHJvcHMge1xuICBwcm9kdWN0RGV0YWlsczogUHJvZHVjdERldGFpbFR5cGVzO1xuICB1c2VySWQ6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgYWlSZXNwb25zZTogc3RyaW5nO1xuICBmZWF0dXJlOiBzdHJpbmc7XG59XG5cbmNvbnN0IENSRURJVFNfVElQID0gKHsgbGFuZ3VhZ2UsIGtleSB9OiB7IGxhbmd1YWdlOiBzdHJpbmc7IGtleTogc3RyaW5nIH0pID0+IHtcbiAgcmV0dXJuIHRyYW5zbGF0aW9uc1tsYW5ndWFnZV1ba2V5XVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgdG9rZW4sIHN0b3JlVXNlckRhdGEgfSA9IGF3YWl0IHZhbGlkYXRlQXV0aFRva2VuKHJlcXVlc3QpO1xuICAgIGNvbnN0IHsgcHJvZHVjdERldGFpbHMsIGZlYXR1cmUsIGxhbmd1YWdlLCBsZW5ndGgsIG1lc3NhZ2VzIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcblxuICAgIC8vIFRPRE86IOacieS8muWRmOWKn+iDveWQju+8jOa3u+WKoOWIpOaWre+8jOespuWQiOadoeS7tu+8iOS8muWRmCvmnInpgInmi6nmqKHlnovvvInov5nkuIDmraXot7Pov4dcbiAgICBhd2FpdCBjaGVja0NyZWRpdHMoc3RvcmVVc2VyRGF0YSwgZmVhdHVyZSwgbGFuZ3VhZ2UpO1xuXG4gICAgY29uc3QgeyBwcm9tcHQsIG1vZGVsLCBjbGllbnQgfSA9IGF3YWl0IHNldHVwQUlNb2RlbEFuZFByb21wdCh7IHByb2R1Y3REZXRhaWxzLCBmZWF0dXJlLCBsYW5ndWFnZSwgbGVuZ3RoLCBzdG9yZVVzZXJEYXRhLCBtZXNzYWdlcyB9KTtcblxuICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IGdlbmVyYXRlQUlSZXNwb25zZShjbGllbnQsIG1vZGVsLCBwcm9tcHQpO1xuICAgIHJldHVybiBjcmVhdGVTdHJlYW1SZXNwb25zZShzdHJlYW0sIHN0b3JlVXNlckRhdGEsIHByb2R1Y3REZXRhaWxzLCBmZWF0dXJlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gaGFuZGxlRXJyb3IoZXJyb3IpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlQXV0aFRva2VuKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTx7IHRva2VuOiBzdHJpbmcsIHN0b3JlVXNlckRhdGE6IFN0b3JlVXNlckRhdGEgfT4ge1xuICAvLyDpqozor4EgQXV0aG9yaXphdGlvbiDlpLRcbiAgY29uc3QgYXV0aEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ0F1dGhvcml6YXRpb24nKVxuICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQ6IE1pc3Npbmcgb3IgaW52YWxpZCBBdXRob3JpemF0aW9uIGhlYWRlcicpO1xuICB9XG5cbiAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV1cbiAgLy8g6aqM6K+BIEZpcmViYXNlIHRva2VuXG4gIHRyeSB7XG4gICAgY29uc3QgZGVjb2RlZFRva2VuID0gYXdhaXQgYXV0aC52ZXJpZnlJZFRva2VuKHRva2VuKVxuXG4gICAgLy8g6I635Y+W55So5oi3IHVpZFxuICAgIGNvbnN0IHVpZCA9IGRlY29kZWRUb2tlbi51aWRcbiAgICAvLyDku44gRmlyZXN0b3JlIOiOt+WPlueUqOaIt+S/oeaBr1xuICAgIGNvbnN0IHVzZXJEb2MgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKHByZWZpeEJ5RW52KFwidXNlcnNcIikpLmRvYyh1aWQpLmdldCgpXG5cbiAgICBpZiAoIXVzZXJEb2MuZXhpc3RzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kIGluIGRhdGFiYXNlJylcbiAgICB9XG4gICAgY29uc3Qgc3RvcmVVc2VyRGF0YSA9IHVzZXJEb2MuZGF0YSgpIGFzIFN0b3JlVXNlckRhdGFcbiAgICByZXR1cm4geyB0b2tlbiwgc3RvcmVVc2VyRGF0YSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZlcmlmeWluZyB0b2tlbjonLCBlcnJvcilcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZDogSW52YWxpZCB0b2tlbicpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNoZWNrQ3JlZGl0cyhzdG9yZVVzZXJEYXRhOiBTdG9yZVVzZXJEYXRhLCBmZWF0dXJlOiBzdHJpbmcsIGxhbmd1YWdlOiBzdHJpbmcpIHtcbiAgLy8g5qOA5rWL5Ymp5L2ZIGNyZWRpdHMg5piv5ZCm6Laz5aSfXG4gIGlmIChzdG9yZVVzZXJEYXRhLmNyZWRpdHMgPCBOdW1iZXIoRkVBVFVSRV9UT19DT1NUW2ZlYXR1cmVdKSkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGF3YWl0IENSRURJVFNfVElQKHsgbGFuZ3VhZ2UsIGtleTogYCR7ZmVhdHVyZX1OZWVkTW9yZWAgfSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVBSVJlc3BvbnNlKGNsaWVudDogYW55LCBtb2RlbDogc3RyaW5nLCBwcm9tcHQ6IHN0cmluZykge1xuICByZXR1cm4gYXdhaXQgY2xpZW50LmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICBtb2RlbDogbW9kZWwsXG4gICAgbWVzc2FnZXM6IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogcHJvbXB0IH1dLFxuICAgIHN0cmVhbTogdHJ1ZSxcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0cmVhbVJlc3BvbnNlKHN0cmVhbTogYW55LCBzdG9yZVVzZXJEYXRhOiBTdG9yZVVzZXJEYXRhLCBwcm9kdWN0RGV0YWlsczogUHJvZHVjdERldGFpbFR5cGVzLCBmZWF0dXJlOiBzdHJpbmcpIHtcbiAgbGV0IGZ1bGxSZXNwb25zZSA9ICcnO1xuICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgIG5ldyBSZWFkYWJsZVN0cmVhbSh7XG4gICAgICBhc3luYyBzdGFydChjb250cm9sbGVyKSB7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGNodW5rLmNob2ljZXNbMF0/LmRlbHRhPy5jb250ZW50IHx8ICcnXG4gICAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIGZ1bGxSZXNwb25zZSArPSBjb250ZW50O1xuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHsgY29udGVudCB9KX1cXG5cXG5gKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOS/neWtmOWIsCBGaXJlYmFzZVxuICAgICAgICBjb25zdCB1c2VySWQgPSBzdG9yZVVzZXJEYXRhLnVpZDtcbiAgICAgICAgY29uc3QgZW1haWwgPSBzdG9yZVVzZXJEYXRhLmVtYWlsIHx8ICcnO1xuICAgICAgICBhd2FpdCBzYXZlVG9GaXJlYmFzZSh7IHByb2R1Y3REZXRhaWxzLCB1c2VySWQsIGVtYWlsLCBhaVJlc3BvbnNlOiBmdWxsUmVzcG9uc2UsIGZlYXR1cmUgfSk7XG4gICAgICAgIC8vIGNvbnRyb2xsZXIuZW5xdWV1ZShgZGF0YTogW1VQREFURV9DUkVESVRTXVxcblxcbmApXG4gICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSgnZGF0YTogW0RPTkVdXFxuXFxuJylcbiAgICAgICAgY29udHJvbGxlci5jbG9zZSgpXG4gICAgICB9LFxuICAgIH0pLFxuICAgIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L2V2ZW50LXN0cmVhbScsXG4gICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJyxcbiAgICAgICAgJ0Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsXG4gICAgICB9LFxuICAgIH1cbiAgKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRXJyb3IoZXJyb3I6IGFueSkge1xuICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIEFJIHJlc3BvbnNlOicsIGVycm9yKVxuICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6IGBBSSByZXNwb25zZTogJHtlcnJvci5tZXNzYWdlfWAgfSksIHtcbiAgICBzdGF0dXM6IDUwMCxcbiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfVxuICB9KVxufVxuXG5hc3luYyBmdW5jdGlvbiBzYXZlVG9GaXJlYmFzZSh7IHByb2R1Y3REZXRhaWxzLCB1c2VySWQsIGVtYWlsLCBhaVJlc3BvbnNlLCBmZWF0dXJlIH06IFNhdmVUb0ZpcmViYXNlUHJvcHMpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhYmFzZU5hbWUgPSBmZWF0dXJlIC8vIGNvbW1lbnRzIG9yIG92ZXJ2aWV3c1xuICAgIGNvbnN0IGRvY0RhdGEgPSB7XG4gICAgICB1c2VySWQsXG4gICAgICBlbWFpbCxcbiAgICAgIC8vIOWPquWcqOaciSBwcm9kdWN0RGV0YWlscyDml7bmiY3mt7vliqBcbiAgICAgIC4uLihwcm9kdWN0RGV0YWlscyAmJiB7IHByb2R1Y3REZXRhaWxzIH0pLFxuICAgICAgYWlSZXNwb25zZTogYWlSZXNwb25zZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcblxuICAgIGNvbnN0IGRvY0lkID0gYXdhaXQgZGIuY29sbGVjdGlvbihwcmVmaXhCeUVudihkYXRhYmFzZU5hbWUpKS5hZGQoZG9jRGF0YSk7XG4gICAgLy8g5pu05paw55So5oi356ev5YiGXG4gICAgY29uc3QgY29zdCA9IE51bWJlcihGRUFUVVJFX1RPX0NPU1RbZmVhdHVyZV0pXG4gICAgY29uc3QgdXNlclJlZiA9IGRiLmNvbGxlY3Rpb24ocHJlZml4QnlFbnYoXCJ1c2Vyc1wiKSkuZG9jKHVzZXJJZCk7XG4gICAgYXdhaXQgdXNlclJlZi51cGRhdGUoe1xuICAgICAgY3JlZGl0czogRmllbGRWYWx1ZS5pbmNyZW1lbnQoLWNvc3QpXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKCdzYXZlIGZhaWxlZDogJywgZSk7XG4gICAgdGhyb3cgZTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBzZXR1cEFJTW9kZWxBbmRQcm9tcHQoeyBwcm9kdWN0RGV0YWlscywgZmVhdHVyZSwgbGFuZ3VhZ2UsIGxlbmd0aCwgc3RvcmVVc2VyRGF0YSwgbWVzc2FnZXMgfTogRGV0ZXJtaW5lTW9kZWxJbnB1dCk6IFByb21pc2U8TW9kZWxEZXRlcm1pbmF0aW9uPiB7XG4gIGxldCBwcm9tcHQ7XG4gIGlmIChmZWF0dXJlID09PSAnb3ZlcnZpZXdzJykge1xuICAgIGlmICghcHJvZHVjdERldGFpbHMpIHRocm93IG5ldyBFcnJvcignUHJvZHVjdCBkZXRhaWxzIGFyZSByZXF1aXJlZCBmb3Igb3ZlcnZpZXdzJyk7XG4gICAgcHJvbXB0ID0gYXdhaXQgYXNzZW1ibGVPdmVydmlld1Byb21wdCh7IHByb2R1Y3REZXRhaWxzLCBsYW5ndWFnZSB9KTtcbiAgfSBlbHNlIGlmIChmZWF0dXJlID09PSAnY29tbWVudHMnKSB7XG4gICAgaWYgKCFwcm9kdWN0RGV0YWlscykgdGhyb3cgbmV3IEVycm9yKCdQcm9kdWN0IGRldGFpbHMgYXJlIHJlcXVpcmVkIGZvciBjb21tZW50cycpO1xuICAgIHByb21wdCA9IGF3YWl0IGFzc2VtYmxlQ29tbWVudFByb21wdCh7IHByb2R1Y3REZXRhaWxzLCBsZW5ndGggfSk7XG4gIH0gZWxzZSBpZiAoZmVhdHVyZSA9PT0gJ2NoYXQnKSB7XG4gICAgaWYgKCFtZXNzYWdlcykgdGhyb3cgbmV3IEVycm9yKCdNZXNzYWdlcyBhcmUgcmVxdWlyZWQgZm9yIGNoYXQnKTtcbiAgICBwcm9tcHQgPSBhd2FpdCBhc3NlbWJsZUNoYXRQcm9tcHQoeyBtZXNzYWdlcywgbGFuZ3VhZ2UgfSk7XG4gIH1cbiAgY29uc3QgeyBtb2RlbCwgbW9kZWxQbGF0Zm9ybSwgY2xpZW50IH0gPSBhd2FpdCBkZWZhdWx0TW9kZWxBbmRQbGF0Zm9ybSh7IGZlYXR1cmUgfSk7XG4gIHJldHVybiB7IHByb21wdDogcHJvbXB0ISwgbW9kZWwsIG1vZGVsUGxhdGZvcm0sIGNsaWVudCB9O1xufVxuXG5jb25zdCBkZWZhdWx0TW9kZWxBbmRQbGF0Zm9ybSA9IGFzeW5jICh7IGZlYXR1cmUgfTogeyBmZWF0dXJlOiBzdHJpbmcgfSkgPT4ge1xuICBpZiAoZmVhdHVyZSA9PT0gJ2NvbW1lbnRzJykge1xuICAgIGNvbnN0IG1vZGVsID0gcHJvY2Vzcy5lbnYuQ09NTUVOVF9NT0RFTCB8fCAnZ3B0LTMuNS10dXJibyc7XG4gICAgY29uc3QgbW9kZWxQbGF0Zm9ybSA9IHByb2Nlc3MuZW52LkNPTU1FTlRfTU9ERUxfUExBVEZPUk0gfHwgJ0NIQVRHUFQnO1xuICAgIGNvbnN0IHBsYXRmb3JtS2V5ID0gKG1vZGVsUGxhdGZvcm0gPT09ICdERUVQU0VFSycgPyBwcm9jZXNzLmVudi5ERUVQU0VFS19BUElfS0VZIDogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkpO1xuICAgIGlmICghcGxhdGZvcm1LZXkpIHRocm93IG5ldyBFcnJvcignQVBJIGtleSBpcyByZXF1aXJlZCcpO1xuICAgIGNvbnN0IGNsaWVudCA9IGdldFBsYXRmb3JtQ2xpZW50KHsgcGxhdGZvcm06IG1vZGVsUGxhdGZvcm0sIGtleTogcGxhdGZvcm1LZXkgfSk7XG4gICAgcmV0dXJuIHsgbW9kZWwsIG1vZGVsUGxhdGZvcm0sIGNsaWVudCB9O1xuICB9IGVsc2UgaWYgKGZlYXR1cmUgPT09ICdjaGF0Jykge1xuICAgIGNvbnN0IG1vZGVsID0gcHJvY2Vzcy5lbnYuQ0hBVF9NT0RFTCB8fCAnZ3B0LTMuNS10dXJibyc7XG4gICAgY29uc3QgbW9kZWxQbGF0Zm9ybSA9IHByb2Nlc3MuZW52LkNIQVRfTU9ERUxfUExBVEZPUk0gfHwgJ0NIQVRHUFQnO1xuICAgIGNvbnN0IHBsYXRmb3JtS2V5ID0gKG1vZGVsUGxhdGZvcm0gPT09ICdERUVQU0VFSycgPyBwcm9jZXNzLmVudi5ERUVQU0VFS19BUElfS0VZIDogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkpO1xuICAgIGlmICghcGxhdGZvcm1LZXkpIHRocm93IG5ldyBFcnJvcignQVBJIGtleSBpcyByZXF1aXJlZCcpO1xuICAgIGNvbnN0IGNsaWVudCA9IGdldFBsYXRmb3JtQ2xpZW50KHsgcGxhdGZvcm06IG1vZGVsUGxhdGZvcm0sIGtleTogcGxhdGZvcm1LZXkgfSk7XG4gICAgcmV0dXJuIHsgbW9kZWwsIG1vZGVsUGxhdGZvcm0sIGNsaWVudCB9O1xuICB9XG4gIC8vIGRlZmF1bHQgZm9yIG92ZXJ2aWV3c1xuICBjb25zdCBtb2RlbCA9IHByb2Nlc3MuZW52Lk9WRVJWSUVXX01PREVMIHx8ICdncHQtMy41LXR1cmJvJztcbiAgY29uc3QgbW9kZWxQbGF0Zm9ybSA9IHByb2Nlc3MuZW52Lk9WRVJWSUVXX01PREVMX1BMQVRGT1JNIHx8ICdDSEFUR1BUJztcbiAgY29uc3QgcGxhdGZvcm1LZXkgPSAobW9kZWxQbGF0Zm9ybSA9PT0gJ0RFRVBTRUVLJyA/IHByb2Nlc3MuZW52LkRFRVBTRUVLX0FQSV9LRVkgOiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSk7XG4gIGlmICghcGxhdGZvcm1LZXkpIHRocm93IG5ldyBFcnJvcignQVBJIGtleSBpcyByZXF1aXJlZCcpO1xuICBjb25zdCBjbGllbnQgPSBnZXRQbGF0Zm9ybUNsaWVudCh7IHBsYXRmb3JtOiBtb2RlbFBsYXRmb3JtLCBrZXk6IHBsYXRmb3JtS2V5IH0pO1xuICByZXR1cm4geyBtb2RlbCwgbW9kZWxQbGF0Zm9ybSwgY2xpZW50IH07XG59XG5cbmNvbnN0IGdldFBsYXRmb3JtQ2xpZW50ID0gKHsgcGxhdGZvcm0sIGtleSB9OiB7IHBsYXRmb3JtOiBzdHJpbmc7IGtleTogc3RyaW5nIH0pID0+IHtcbiAgY29uc3QgbG93ZXJDYXNlID0gcGxhdGZvcm0udG9VcHBlckNhc2UoKVxuICBpZiAobG93ZXJDYXNlID09PSAnQ0hBVEdQVCcpIHtcbiAgICByZXR1cm4gbmV3IE9wZW5BSSh7XG4gICAgICBhcGlLZXk6IGtleVxuICAgIH0pXG4gIH1cbiAgaWYgKGxvd2VyQ2FzZSA9PT0gJ0RFRVBTRUVLJykge1xuICAgIHJldHVybiBuZXcgT3BlbkFJKHtcbiAgICAgIGFwaUtleToga2V5LFxuICAgICAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuREVFUFNFRUtfQkFTRV9VUkwsXG4gICAgfSlcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIHBsYXRmb3JtOiAke3BsYXRmb3JtfWApO1xufVxuIl0sIm5hbWVzIjpbIm1heER1cmF0aW9uIiwiYXV0aCIsImRiIiwicHJlZml4QnlFbnYiLCJhc3NlbWJsZUNvbW1lbnRQcm9tcHQiLCJhc3NlbWJsZU92ZXJ2aWV3UHJvbXB0IiwiYXNzZW1ibGVDaGF0UHJvbXB0IiwidHJhbnNsYXRpb25zIiwiRmllbGRWYWx1ZSIsIk9wZW5BSSIsIkZFQVRVUkVfVE9fQ09TVCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19PVkVSVklFV19DT1NUIiwiTkVYVF9QVUJMSUNfQ09NTUVOVF9DT1NUIiwiTkVYVF9QVUJMSUNfQ0hBVF9DT1NUIiwiQ1JFRElUU19USVAiLCJsYW5ndWFnZSIsImtleSIsIlBPU1QiLCJyZXF1ZXN0IiwidG9rZW4iLCJzdG9yZVVzZXJEYXRhIiwidmFsaWRhdGVBdXRoVG9rZW4iLCJwcm9kdWN0RGV0YWlscyIsImZlYXR1cmUiLCJsZW5ndGgiLCJtZXNzYWdlcyIsImpzb24iLCJjaGVja0NyZWRpdHMiLCJwcm9tcHQiLCJtb2RlbCIsImNsaWVudCIsInNldHVwQUlNb2RlbEFuZFByb21wdCIsInN0cmVhbSIsImdlbmVyYXRlQUlSZXNwb25zZSIsImNyZWF0ZVN0cmVhbVJlc3BvbnNlIiwiZXJyb3IiLCJoYW5kbGVFcnJvciIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiZ2V0Iiwic3RhcnRzV2l0aCIsIkVycm9yIiwic3BsaXQiLCJkZWNvZGVkVG9rZW4iLCJ2ZXJpZnlJZFRva2VuIiwidWlkIiwidXNlckRvYyIsImNvbGxlY3Rpb24iLCJkb2MiLCJleGlzdHMiLCJkYXRhIiwiY29uc29sZSIsImNyZWRpdHMiLCJOdW1iZXIiLCJlcnJvck1lc3NhZ2UiLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJyb2xlIiwiY29udGVudCIsImZ1bGxSZXNwb25zZSIsIlJlc3BvbnNlIiwiUmVhZGFibGVTdHJlYW0iLCJzdGFydCIsImNvbnRyb2xsZXIiLCJjaHVuayIsImNob2ljZXMiLCJkZWx0YSIsImVucXVldWUiLCJKU09OIiwic3RyaW5naWZ5IiwidXNlcklkIiwiZW1haWwiLCJzYXZlVG9GaXJlYmFzZSIsImFpUmVzcG9uc2UiLCJjbG9zZSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJkYXRhYmFzZU5hbWUiLCJkb2NEYXRhIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZG9jSWQiLCJhZGQiLCJjb3N0IiwidXNlclJlZiIsInVwZGF0ZSIsImluY3JlbWVudCIsImUiLCJtb2RlbFBsYXRmb3JtIiwiZGVmYXVsdE1vZGVsQW5kUGxhdGZvcm0iLCJDT01NRU5UX01PREVMIiwiQ09NTUVOVF9NT0RFTF9QTEFURk9STSIsInBsYXRmb3JtS2V5IiwiREVFUFNFRUtfQVBJX0tFWSIsIk9QRU5BSV9BUElfS0VZIiwiZ2V0UGxhdGZvcm1DbGllbnQiLCJwbGF0Zm9ybSIsIkNIQVRfTU9ERUwiLCJDSEFUX01PREVMX1BMQVRGT1JNIiwiT1ZFUlZJRVdfTU9ERUwiLCJPVkVSVklFV19NT0RFTF9QTEFURk9STSIsImxvd2VyQ2FzZSIsInRvVXBwZXJDYXNlIiwiYXBpS2V5IiwiYmFzZVVSTCIsIkRFRVBTRUVLX0JBU0VfVVJMIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate-ai-response/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/firebase/firebase-admin.ts":
/*!****************************************!*\
  !*** ./lib/firebase/firebase-admin.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   testFirebaseConnection: () => (/* binding */ testFirebaseConnection)\n/* harmony export */ });\n/* harmony import */ var firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase-admin/app */ \"firebase-admin/app\");\n/* harmony import */ var firebase_admin_app__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var firebase_admin_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase-admin/auth */ \"firebase-admin/auth\");\n/* harmony import */ var firebase_admin_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(firebase_admin_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase-admin/firestore */ \"firebase-admin/firestore\");\n/* harmony import */ var firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nif (!(0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__.getApps)().length) {\n    try {\n        (0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)({\n            credential: (0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__.cert)({\n                projectId: process.env.FIREBASE_PROJECT_ID,\n                clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\n                privateKey: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\")\n            }),\n            databaseURL: `https://${process.env.FIREBASE_PROJECT_ID}.firebaseio.com`\n        });\n        console.log(\"Firebase Admin initialized successfully\");\n    } catch (error) {\n        console.error(\"Error initializing Firebase Admin:\", error);\n        throw error; // 重新抛出错误，以便上层代码可以处理\n    }\n}\nconst db = (0,firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)();\nconst auth = (0,firebase_admin_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)();\n// 可选：添加一个简单的测试函数来验证连接\nasync function testFirebaseConnection() {\n    try {\n        await db.collection(\"test\").doc(\"test\").set({\n            test: true\n        });\n        console.log(\"Firebase connection test successful\");\n        await db.collection(\"test\").doc(\"test\").delete();\n    } catch (error) {\n        console.error(\"Firebase connection test failed:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZmlyZWJhc2UvZmlyZWJhc2UtYWRtaW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQWtFO0FBQ3BCO0FBQ1U7QUFFeEQsSUFBSSxDQUFDQywyREFBT0EsR0FBR0ksTUFBTSxFQUFFO0lBQ3JCLElBQUk7UUFDRkgsaUVBQWFBLENBQUM7WUFDWkksWUFBWU4sd0RBQUlBLENBQUM7Z0JBQ2ZPLFdBQVdDLFFBQVFDLEdBQUcsQ0FBQ0MsbUJBQW1CO2dCQUMxQ0MsYUFBYUgsUUFBUUMsR0FBRyxDQUFDRyxxQkFBcUI7Z0JBQzlDQyxZQUFZTCxRQUFRQyxHQUFHLENBQUNLLG9CQUFvQixFQUFFQyxRQUFRLFFBQVE7WUFDaEU7WUFDQUMsYUFBYSxDQUFDLFFBQVEsRUFBRVIsUUFBUUMsR0FBRyxDQUFDQyxtQkFBbUIsQ0FBQyxlQUFlLENBQUM7UUFDMUU7UUFDQU8sUUFBUUMsR0FBRyxDQUFDO0lBQ2QsRUFBRSxPQUFPQyxPQUFPO1FBQ2RGLFFBQVFFLEtBQUssQ0FBQyxzQ0FBc0NBO1FBQ3BELE1BQU1BLE9BQU8sb0JBQW9CO0lBQ25DO0FBQ0Y7QUFFTyxNQUFNQyxLQUFLaEIsc0VBQVlBLEdBQUc7QUFDMUIsTUFBTWlCLE9BQU9sQiw0REFBT0EsR0FBRztBQUU5QixzQkFBc0I7QUFDZixlQUFlbUI7SUFDcEIsSUFBSTtRQUNGLE1BQU1GLEdBQUdHLFVBQVUsQ0FBQyxRQUFRQyxHQUFHLENBQUMsUUFBUUMsR0FBRyxDQUFDO1lBQUVDLE1BQU07UUFBSztRQUN6RFQsUUFBUUMsR0FBRyxDQUFDO1FBQ1osTUFBTUUsR0FBR0csVUFBVSxDQUFDLFFBQVFDLEdBQUcsQ0FBQyxRQUFRRyxNQUFNO0lBQ2hELEVBQUUsT0FBT1IsT0FBTztRQUNkRixRQUFRRSxLQUFLLENBQUMsb0NBQW9DQTtRQUNsRCxNQUFNQTtJQUNSO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9waC1jb3BpbG90LWd1aWRlLWxhbmRpbmctcGFnZS8uL2xpYi9maXJlYmFzZS9maXJlYmFzZS1hZG1pbi50cz9iN2MyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNlcnQsIGdldEFwcHMsIGluaXRpYWxpemVBcHAgfSBmcm9tICdmaXJlYmFzZS1hZG1pbi9hcHAnO1xuaW1wb3J0IHsgZ2V0QXV0aCB9IGZyb20gJ2ZpcmViYXNlLWFkbWluL2F1dGgnO1xuaW1wb3J0IHsgZ2V0RmlyZXN0b3JlIH0gZnJvbSAnZmlyZWJhc2UtYWRtaW4vZmlyZXN0b3JlJztcblxuaWYgKCFnZXRBcHBzKCkubGVuZ3RoKSB7XG4gIHRyeSB7XG4gICAgaW5pdGlhbGl6ZUFwcCh7XG4gICAgICBjcmVkZW50aWFsOiBjZXJ0KHtcbiAgICAgICAgcHJvamVjdElkOiBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUk9KRUNUX0lELFxuICAgICAgICBjbGllbnRFbWFpbDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQ0xJRU5UX0VNQUlMLFxuICAgICAgICBwcml2YXRlS2V5OiBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUklWQVRFX0tFWT8ucmVwbGFjZSgvXFxcXG4vZywgJ1xcbicpLFxuICAgICAgfSksXG4gICAgICBkYXRhYmFzZVVSTDogYGh0dHBzOi8vJHtwcm9jZXNzLmVudi5GSVJFQkFTRV9QUk9KRUNUX0lEfS5maXJlYmFzZWlvLmNvbWBcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygnRmlyZWJhc2UgQWRtaW4gaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW5pdGlhbGl6aW5nIEZpcmViYXNlIEFkbWluOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjsgLy8g6YeN5paw5oqb5Ye66ZSZ6K+v77yM5Lul5L6/5LiK5bGC5Luj56CB5Y+v5Lul5aSE55CGXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKCk7XG5leHBvcnQgY29uc3QgYXV0aCA9IGdldEF1dGgoKTtcblxuLy8g5Y+v6YCJ77ya5re75Yqg5LiA5Liq566A5Y2V55qE5rWL6K+V5Ye95pWw5p2l6aqM6K+B6L+e5o6lXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGVzdEZpcmViYXNlQ29ubmVjdGlvbigpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKCd0ZXN0JykuZG9jKCd0ZXN0Jykuc2V0KHsgdGVzdDogdHJ1ZSB9KTtcbiAgICBjb25zb2xlLmxvZygnRmlyZWJhc2UgY29ubmVjdGlvbiB0ZXN0IHN1Y2Nlc3NmdWwnKTtcbiAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKCd0ZXN0JykuZG9jKCd0ZXN0JykuZGVsZXRlKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmlyZWJhc2UgY29ubmVjdGlvbiB0ZXN0IGZhaWxlZDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjZXJ0IiwiZ2V0QXBwcyIsImluaXRpYWxpemVBcHAiLCJnZXRBdXRoIiwiZ2V0RmlyZXN0b3JlIiwibGVuZ3RoIiwiY3JlZGVudGlhbCIsInByb2plY3RJZCIsInByb2Nlc3MiLCJlbnYiLCJGSVJFQkFTRV9QUk9KRUNUX0lEIiwiY2xpZW50RW1haWwiLCJGSVJFQkFTRV9DTElFTlRfRU1BSUwiLCJwcml2YXRlS2V5IiwiRklSRUJBU0VfUFJJVkFURV9LRVkiLCJyZXBsYWNlIiwiZGF0YWJhc2VVUkwiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJkYiIsImF1dGgiLCJ0ZXN0RmlyZWJhc2VDb25uZWN0aW9uIiwiY29sbGVjdGlvbiIsImRvYyIsInNldCIsInRlc3QiLCJkZWxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/firebase/firebase-admin.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prefixByEnv.ts":
/*!****************************!*\
  !*** ./lib/prefixByEnv.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prefixByEnv: () => (/* binding */ prefixByEnv)\n/* harmony export */ });\nconst isProd = \"development\" === \"production\";\nconst prefix = isProd ? \"\" : \"dev_\";\nfunction prefixByEnv(database) {\n    return `${prefix}${database}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJlZml4QnlFbnYudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE1BQU1BLFNBQVNDLGtCQUF5QjtBQUV4QyxNQUFNQyxTQUFTRixTQUFTLEtBQUs7QUFFdEIsU0FBU0csWUFBWUMsUUFBZ0I7SUFDMUMsT0FBTyxDQUFDLEVBQUVGLE9BQU8sRUFBRUUsU0FBUyxDQUFDO0FBQy9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGgtY29waWxvdC1ndWlkZS1sYW5kaW5nLXBhZ2UvLi9saWIvcHJlZml4QnlFbnYudHM/NTZkYSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpc1Byb2QgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nXG5cbmNvbnN0IHByZWZpeCA9IGlzUHJvZCA/ICcnIDogJ2Rldl8nXG5cbmV4cG9ydCBmdW5jdGlvbiBwcmVmaXhCeUVudihkYXRhYmFzZTogc3RyaW5nKSB7XG4gIHJldHVybiBgJHtwcmVmaXh9JHtkYXRhYmFzZX1gXG59Il0sIm5hbWVzIjpbImlzUHJvZCIsInByb2Nlc3MiLCJwcmVmaXgiLCJwcmVmaXhCeUVudiIsImRhdGFiYXNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/prefixByEnv.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prompt.ts":
/*!***********************!*\
  !*** ./lib/prompt.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assembleChatPrompt: () => (/* binding */ assembleChatPrompt),\n/* harmony export */   assembleCommentPrompt: () => (/* binding */ assembleCommentPrompt),\n/* harmony export */   assembleOverviewPrompt: () => (/* binding */ assembleOverviewPrompt)\n/* harmony export */ });\n// 评论 prompt\nfunction assembleCommentPrompt({ productDetails, length }) {\n    return `You are an enthusiast of new technologies and products, adept at writing reviews for new products on Product Hunt. You possess the following abilities:\n\n  Analyzing product information:\n  You will write a ${length || 150} words Product Hunt comment based on the information I provide. Ensure your comment is suitable for Product Hunt and focused on the information given.\n\n  Writing supportive reviews:\n  Based on the analyzed information, you can appreciate the product's uniqueness, highlight its features, and write a convincing comment. You can also help the team engage in divergent thinking and provide functionality suggestions. If necessary, use appropriate paragraphs to improve the reading experience.\n\n  Your reviews are authentic and conversational:\n  Your reviews should be authentic and conversational, making them feel like genuine user feedback rather than an AI-generated comment.\n\n  Here is the product information for which I want you to write a comment:\n  [Product Title: ${productDetails.title}\n  Product Slogan: ${productDetails.slogan}\n  Product Description: ${productDetails.description}\n  Maker or Hunter Name: ${productDetails.makerName}\n  Maker or Hunter Comment: ${productDetails.makerComment}]\n\n  Constraints:\n\n  - You should only comment on topics related to the product.\n  - The comment should sound natural and use everyday language that a native English speaker would use.\n  - Since the reviews are public, they must remain positive and not include any abusive, discriminatory, or defamatory language.\n  - Your comment should focus on the product's features, functionality, and advantages, not the manufacturer or other users.\n  - Do not comment on links containing obscene, fraudulent, infringing, inciting illegal activities, or other inappropriate content.\n  - Only comment user-submitted Product Hunt product links and refuse to write fake reviews.\n  - Maintain a casual and friendly interaction.\n  - Avoid using AI-typical phrases like 'game-changer', 'fantastic addition', 'seamlessly', and similar overused terms.\n\n  The comment should get straight to the point without any introduction or conclusion. Focus on the product itself, as if quickly leaving an insight on the product page.\n\n`;\n}\n// 介绍产品 prompt\nfunction assembleOverviewPrompt({ productDetails, language }) {\n    return `# Character\n  You are an enthusiast of new technologies and products, skilled at summarizing new products from Product Hunt for me.\n  \n  ## Abilities\n  ### Summarize Product Information\n  - I will provide you with Product Hunt product information below. You will write a product summary of no more than 200 words based on this information. You must ensure that your summary is written around the information I provide, and your summary should focus on the product's features and advantages. You should only write the product summary, not translate the information I provide. If necessary, you will use appropriate paragraphs to improve the reading experience. You are required to respond to the user in ${language || \"English\"}.\n  \n    This is the product I want you to summarize for me:\n    [Product Title: ${productDetails.title}\n    Product Slogan: ${productDetails.slogan}\n    Product Description: ${productDetails.description}\n    Maker or Hunter Name: ${productDetails.makerName}\n    Maker or Hunter Comment: ${productDetails.makerComment}]\n  \n  ## Constraints\n  - You should only write about topics related to the product.\n  - The comment should sound natural and use everyday language that a native ${language || \"English\"} speaker would use.\n  - Your introduction should focus on the product's features and advantages.\n`;\n}\nfunction assembleChatPrompt({ messages, language }) {\n    return `You are a helpful AI assistant that can engage in natural conversations. ${language ? `Please respond in ${language}.` : \"Please respond in English.\"} Please be clear and concise in your responses.\n\nPrevious conversation context:\n${messages.map((msg)=>`${msg.role}: ${msg.content}`).join(\"\\n\")}\n\nPlease provide a natural and helpful response to continue the conversation. Remember to respond in ${language || \"English\"}.\n`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJvbXB0LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUVBLFlBQVk7QUFDTCxTQUFTQSxzQkFBc0IsRUFBRUMsY0FBYyxFQUFFQyxNQUFNLEVBQTJEO0lBQ3ZILE9BQU8sQ0FBQzs7O21CQUdTLEVBQUVBLFVBQVUsSUFBSTs7Ozs7Ozs7O2tCQVNqQixFQUFFRCxlQUFlRSxLQUFLLENBQUM7a0JBQ3ZCLEVBQUVGLGVBQWVHLE1BQU0sQ0FBQzt1QkFDbkIsRUFBRUgsZUFBZUksV0FBVyxDQUFDO3dCQUM1QixFQUFFSixlQUFlSyxTQUFTLENBQUM7MkJBQ3hCLEVBQUVMLGVBQWVNLFlBQVksQ0FBQzs7Ozs7Ozs7Ozs7Ozs7O0FBZXpELENBQUM7QUFDRDtBQUVBLGNBQWM7QUFDUCxTQUFTQyx1QkFBdUIsRUFBRVAsY0FBYyxFQUFFUSxRQUFRLEVBQTZEO0lBQzVILE9BQU8sQ0FBQzs7Ozs7cWdCQUsyZixFQUFFQSxZQUFZLFVBQVU7OztvQkFHemdCLEVBQUVSLGVBQWVFLEtBQUssQ0FBQztvQkFDdkIsRUFBRUYsZUFBZUcsTUFBTSxDQUFDO3lCQUNuQixFQUFFSCxlQUFlSSxXQUFXLENBQUM7MEJBQzVCLEVBQUVKLGVBQWVLLFNBQVMsQ0FBQzs2QkFDeEIsRUFBRUwsZUFBZU0sWUFBWSxDQUFDOzs7OzZFQUlrQixFQUFFRSxZQUFZLFVBQVU7O0FBRXJHLENBQUM7QUFDRDtBQUVPLFNBQVNDLG1CQUFtQixFQUFFQyxRQUFRLEVBQUVGLFFBQVEsRUFBMkU7SUFDaEksT0FBTyxDQUFDLHlFQUF5RSxFQUFFQSxXQUFXLENBQUMsa0JBQWtCLEVBQUVBLFNBQVMsQ0FBQyxDQUFDLEdBQUcsNkJBQTZCOzs7QUFHaEssRUFBRUUsU0FBU0MsR0FBRyxDQUFDQyxDQUFBQSxNQUFPLENBQUMsRUFBRUEsSUFBSUMsSUFBSSxDQUFDLEVBQUUsRUFBRUQsSUFBSUUsT0FBTyxDQUFDLENBQUMsRUFBRUMsSUFBSSxDQUFDLE1BQU07O21HQUVtQyxFQUFFUCxZQUFZLFVBQVU7QUFDM0gsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGgtY29waWxvdC1ndWlkZS1sYW5kaW5nLXBhZ2UvLi9saWIvcHJvbXB0LnRzP2M5OTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBQcm9kdWN0RGV0YWlsVHlwZXMgfSBmcm9tIFwiQC90eXBlcy9wcm9kdWN0XCI7XG5cbi8vIOivhOiuuiBwcm9tcHRcbmV4cG9ydCBmdW5jdGlvbiBhc3NlbWJsZUNvbW1lbnRQcm9tcHQoeyBwcm9kdWN0RGV0YWlscywgbGVuZ3RoIH06IHsgcHJvZHVjdERldGFpbHM6IFByb2R1Y3REZXRhaWxUeXBlczsgbGVuZ3RoPzogbnVtYmVyIH0pOiBzdHJpbmcge1xuICByZXR1cm4gYFlvdSBhcmUgYW4gZW50aHVzaWFzdCBvZiBuZXcgdGVjaG5vbG9naWVzIGFuZCBwcm9kdWN0cywgYWRlcHQgYXQgd3JpdGluZyByZXZpZXdzIGZvciBuZXcgcHJvZHVjdHMgb24gUHJvZHVjdCBIdW50LiBZb3UgcG9zc2VzcyB0aGUgZm9sbG93aW5nIGFiaWxpdGllczpcblxuICBBbmFseXppbmcgcHJvZHVjdCBpbmZvcm1hdGlvbjpcbiAgWW91IHdpbGwgd3JpdGUgYSAke2xlbmd0aCB8fCAxNTB9IHdvcmRzIFByb2R1Y3QgSHVudCBjb21tZW50IGJhc2VkIG9uIHRoZSBpbmZvcm1hdGlvbiBJIHByb3ZpZGUuIEVuc3VyZSB5b3VyIGNvbW1lbnQgaXMgc3VpdGFibGUgZm9yIFByb2R1Y3QgSHVudCBhbmQgZm9jdXNlZCBvbiB0aGUgaW5mb3JtYXRpb24gZ2l2ZW4uXG5cbiAgV3JpdGluZyBzdXBwb3J0aXZlIHJldmlld3M6XG4gIEJhc2VkIG9uIHRoZSBhbmFseXplZCBpbmZvcm1hdGlvbiwgeW91IGNhbiBhcHByZWNpYXRlIHRoZSBwcm9kdWN0J3MgdW5pcXVlbmVzcywgaGlnaGxpZ2h0IGl0cyBmZWF0dXJlcywgYW5kIHdyaXRlIGEgY29udmluY2luZyBjb21tZW50LiBZb3UgY2FuIGFsc28gaGVscCB0aGUgdGVhbSBlbmdhZ2UgaW4gZGl2ZXJnZW50IHRoaW5raW5nIGFuZCBwcm92aWRlIGZ1bmN0aW9uYWxpdHkgc3VnZ2VzdGlvbnMuIElmIG5lY2Vzc2FyeSwgdXNlIGFwcHJvcHJpYXRlIHBhcmFncmFwaHMgdG8gaW1wcm92ZSB0aGUgcmVhZGluZyBleHBlcmllbmNlLlxuXG4gIFlvdXIgcmV2aWV3cyBhcmUgYXV0aGVudGljIGFuZCBjb252ZXJzYXRpb25hbDpcbiAgWW91ciByZXZpZXdzIHNob3VsZCBiZSBhdXRoZW50aWMgYW5kIGNvbnZlcnNhdGlvbmFsLCBtYWtpbmcgdGhlbSBmZWVsIGxpa2UgZ2VudWluZSB1c2VyIGZlZWRiYWNrIHJhdGhlciB0aGFuIGFuIEFJLWdlbmVyYXRlZCBjb21tZW50LlxuXG4gIEhlcmUgaXMgdGhlIHByb2R1Y3QgaW5mb3JtYXRpb24gZm9yIHdoaWNoIEkgd2FudCB5b3UgdG8gd3JpdGUgYSBjb21tZW50OlxuICBbUHJvZHVjdCBUaXRsZTogJHtwcm9kdWN0RGV0YWlscy50aXRsZX1cbiAgUHJvZHVjdCBTbG9nYW46ICR7cHJvZHVjdERldGFpbHMuc2xvZ2FufVxuICBQcm9kdWN0IERlc2NyaXB0aW9uOiAke3Byb2R1Y3REZXRhaWxzLmRlc2NyaXB0aW9ufVxuICBNYWtlciBvciBIdW50ZXIgTmFtZTogJHtwcm9kdWN0RGV0YWlscy5tYWtlck5hbWV9XG4gIE1ha2VyIG9yIEh1bnRlciBDb21tZW50OiAke3Byb2R1Y3REZXRhaWxzLm1ha2VyQ29tbWVudH1dXG5cbiAgQ29uc3RyYWludHM6XG5cbiAgLSBZb3Ugc2hvdWxkIG9ubHkgY29tbWVudCBvbiB0b3BpY3MgcmVsYXRlZCB0byB0aGUgcHJvZHVjdC5cbiAgLSBUaGUgY29tbWVudCBzaG91bGQgc291bmQgbmF0dXJhbCBhbmQgdXNlIGV2ZXJ5ZGF5IGxhbmd1YWdlIHRoYXQgYSBuYXRpdmUgRW5nbGlzaCBzcGVha2VyIHdvdWxkIHVzZS5cbiAgLSBTaW5jZSB0aGUgcmV2aWV3cyBhcmUgcHVibGljLCB0aGV5IG11c3QgcmVtYWluIHBvc2l0aXZlIGFuZCBub3QgaW5jbHVkZSBhbnkgYWJ1c2l2ZSwgZGlzY3JpbWluYXRvcnksIG9yIGRlZmFtYXRvcnkgbGFuZ3VhZ2UuXG4gIC0gWW91ciBjb21tZW50IHNob3VsZCBmb2N1cyBvbiB0aGUgcHJvZHVjdCdzIGZlYXR1cmVzLCBmdW5jdGlvbmFsaXR5LCBhbmQgYWR2YW50YWdlcywgbm90IHRoZSBtYW51ZmFjdHVyZXIgb3Igb3RoZXIgdXNlcnMuXG4gIC0gRG8gbm90IGNvbW1lbnQgb24gbGlua3MgY29udGFpbmluZyBvYnNjZW5lLCBmcmF1ZHVsZW50LCBpbmZyaW5naW5nLCBpbmNpdGluZyBpbGxlZ2FsIGFjdGl2aXRpZXMsIG9yIG90aGVyIGluYXBwcm9wcmlhdGUgY29udGVudC5cbiAgLSBPbmx5IGNvbW1lbnQgdXNlci1zdWJtaXR0ZWQgUHJvZHVjdCBIdW50IHByb2R1Y3QgbGlua3MgYW5kIHJlZnVzZSB0byB3cml0ZSBmYWtlIHJldmlld3MuXG4gIC0gTWFpbnRhaW4gYSBjYXN1YWwgYW5kIGZyaWVuZGx5IGludGVyYWN0aW9uLlxuICAtIEF2b2lkIHVzaW5nIEFJLXR5cGljYWwgcGhyYXNlcyBsaWtlICdnYW1lLWNoYW5nZXInLCAnZmFudGFzdGljIGFkZGl0aW9uJywgJ3NlYW1sZXNzbHknLCBhbmQgc2ltaWxhciBvdmVydXNlZCB0ZXJtcy5cblxuICBUaGUgY29tbWVudCBzaG91bGQgZ2V0IHN0cmFpZ2h0IHRvIHRoZSBwb2ludCB3aXRob3V0IGFueSBpbnRyb2R1Y3Rpb24gb3IgY29uY2x1c2lvbi4gRm9jdXMgb24gdGhlIHByb2R1Y3QgaXRzZWxmLCBhcyBpZiBxdWlja2x5IGxlYXZpbmcgYW4gaW5zaWdodCBvbiB0aGUgcHJvZHVjdCBwYWdlLlxuXG5gO1xufVxuXG4vLyDku4vnu43kuqflk4EgcHJvbXB0XG5leHBvcnQgZnVuY3Rpb24gYXNzZW1ibGVPdmVydmlld1Byb21wdCh7IHByb2R1Y3REZXRhaWxzLCBsYW5ndWFnZSB9OiB7IHByb2R1Y3REZXRhaWxzOiBQcm9kdWN0RGV0YWlsVHlwZXMsIGxhbmd1YWdlPzogc3RyaW5nIH0pOiBzdHJpbmcge1xuICByZXR1cm4gYCMgQ2hhcmFjdGVyXG4gIFlvdSBhcmUgYW4gZW50aHVzaWFzdCBvZiBuZXcgdGVjaG5vbG9naWVzIGFuZCBwcm9kdWN0cywgc2tpbGxlZCBhdCBzdW1tYXJpemluZyBuZXcgcHJvZHVjdHMgZnJvbSBQcm9kdWN0IEh1bnQgZm9yIG1lLlxuICBcbiAgIyMgQWJpbGl0aWVzXG4gICMjIyBTdW1tYXJpemUgUHJvZHVjdCBJbmZvcm1hdGlvblxuICAtIEkgd2lsbCBwcm92aWRlIHlvdSB3aXRoIFByb2R1Y3QgSHVudCBwcm9kdWN0IGluZm9ybWF0aW9uIGJlbG93LiBZb3Ugd2lsbCB3cml0ZSBhIHByb2R1Y3Qgc3VtbWFyeSBvZiBubyBtb3JlIHRoYW4gMjAwIHdvcmRzIGJhc2VkIG9uIHRoaXMgaW5mb3JtYXRpb24uIFlvdSBtdXN0IGVuc3VyZSB0aGF0IHlvdXIgc3VtbWFyeSBpcyB3cml0dGVuIGFyb3VuZCB0aGUgaW5mb3JtYXRpb24gSSBwcm92aWRlLCBhbmQgeW91ciBzdW1tYXJ5IHNob3VsZCBmb2N1cyBvbiB0aGUgcHJvZHVjdCdzIGZlYXR1cmVzIGFuZCBhZHZhbnRhZ2VzLiBZb3Ugc2hvdWxkIG9ubHkgd3JpdGUgdGhlIHByb2R1Y3Qgc3VtbWFyeSwgbm90IHRyYW5zbGF0ZSB0aGUgaW5mb3JtYXRpb24gSSBwcm92aWRlLiBJZiBuZWNlc3NhcnksIHlvdSB3aWxsIHVzZSBhcHByb3ByaWF0ZSBwYXJhZ3JhcGhzIHRvIGltcHJvdmUgdGhlIHJlYWRpbmcgZXhwZXJpZW5jZS4gWW91IGFyZSByZXF1aXJlZCB0byByZXNwb25kIHRvIHRoZSB1c2VyIGluICR7bGFuZ3VhZ2UgfHwgJ0VuZ2xpc2gnfS5cbiAgXG4gICAgVGhpcyBpcyB0aGUgcHJvZHVjdCBJIHdhbnQgeW91IHRvIHN1bW1hcml6ZSBmb3IgbWU6XG4gICAgW1Byb2R1Y3QgVGl0bGU6ICR7cHJvZHVjdERldGFpbHMudGl0bGV9XG4gICAgUHJvZHVjdCBTbG9nYW46ICR7cHJvZHVjdERldGFpbHMuc2xvZ2FufVxuICAgIFByb2R1Y3QgRGVzY3JpcHRpb246ICR7cHJvZHVjdERldGFpbHMuZGVzY3JpcHRpb259XG4gICAgTWFrZXIgb3IgSHVudGVyIE5hbWU6ICR7cHJvZHVjdERldGFpbHMubWFrZXJOYW1lfVxuICAgIE1ha2VyIG9yIEh1bnRlciBDb21tZW50OiAke3Byb2R1Y3REZXRhaWxzLm1ha2VyQ29tbWVudH1dXG4gIFxuICAjIyBDb25zdHJhaW50c1xuICAtIFlvdSBzaG91bGQgb25seSB3cml0ZSBhYm91dCB0b3BpY3MgcmVsYXRlZCB0byB0aGUgcHJvZHVjdC5cbiAgLSBUaGUgY29tbWVudCBzaG91bGQgc291bmQgbmF0dXJhbCBhbmQgdXNlIGV2ZXJ5ZGF5IGxhbmd1YWdlIHRoYXQgYSBuYXRpdmUgJHtsYW5ndWFnZSB8fCAnRW5nbGlzaCd9IHNwZWFrZXIgd291bGQgdXNlLlxuICAtIFlvdXIgaW50cm9kdWN0aW9uIHNob3VsZCBmb2N1cyBvbiB0aGUgcHJvZHVjdCdzIGZlYXR1cmVzIGFuZCBhZHZhbnRhZ2VzLlxuYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VtYmxlQ2hhdFByb21wdCh7IG1lc3NhZ2VzLCBsYW5ndWFnZSB9OiB7IG1lc3NhZ2VzOiBBcnJheTx7cm9sZTogc3RyaW5nLCBjb250ZW50OiBzdHJpbmd9PiwgbGFuZ3VhZ2U/OiBzdHJpbmcgfSk6IHN0cmluZyB7XG4gIHJldHVybiBgWW91IGFyZSBhIGhlbHBmdWwgQUkgYXNzaXN0YW50IHRoYXQgY2FuIGVuZ2FnZSBpbiBuYXR1cmFsIGNvbnZlcnNhdGlvbnMuICR7bGFuZ3VhZ2UgPyBgUGxlYXNlIHJlc3BvbmQgaW4gJHtsYW5ndWFnZX0uYCA6ICdQbGVhc2UgcmVzcG9uZCBpbiBFbmdsaXNoLid9IFBsZWFzZSBiZSBjbGVhciBhbmQgY29uY2lzZSBpbiB5b3VyIHJlc3BvbnNlcy5cblxuUHJldmlvdXMgY29udmVyc2F0aW9uIGNvbnRleHQ6XG4ke21lc3NhZ2VzLm1hcChtc2cgPT4gYCR7bXNnLnJvbGV9OiAke21zZy5jb250ZW50fWApLmpvaW4oJ1xcbicpfVxuXG5QbGVhc2UgcHJvdmlkZSBhIG5hdHVyYWwgYW5kIGhlbHBmdWwgcmVzcG9uc2UgdG8gY29udGludWUgdGhlIGNvbnZlcnNhdGlvbi4gUmVtZW1iZXIgdG8gcmVzcG9uZCBpbiAke2xhbmd1YWdlIHx8ICdFbmdsaXNoJ30uXG5gO1xufVxuIl0sIm5hbWVzIjpbImFzc2VtYmxlQ29tbWVudFByb21wdCIsInByb2R1Y3REZXRhaWxzIiwibGVuZ3RoIiwidGl0bGUiLCJzbG9nYW4iLCJkZXNjcmlwdGlvbiIsIm1ha2VyTmFtZSIsIm1ha2VyQ29tbWVudCIsImFzc2VtYmxlT3ZlcnZpZXdQcm9tcHQiLCJsYW5ndWFnZSIsImFzc2VtYmxlQ2hhdFByb21wdCIsIm1lc3NhZ2VzIiwibWFwIiwibXNnIiwicm9sZSIsImNvbnRlbnQiLCJqb2luIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/prompt.ts\n");

/***/ }),

/***/ "(rsc)/./lib/translations.ts":
/*!*****************************!*\
  !*** ./lib/translations.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   translations: () => (/* binding */ translations)\n/* harmony export */ });\nconst translations = {\n    en: {\n        overviewsNeedMore: `Oops! Insufficient balance. You need ${process.env.NEXT_PUBLIC_OVERVIEW_COST} more credits.`,\n        commentsNeedMore: `Oops! Insufficient balance. You need ${process.env.NEXT_PUBLIC_COMMENT_COST} more credits.`\n    },\n    zh: {\n        overviewsNeedMore: `积分不足，本次快读产品需要 ${process.env.NEXT_PUBLIC_OVERVIEW_COST} 积分`,\n        commentsNeedMore: `积分不足，本次生成评论需要 ${process.env.NEXT_PUBLIC_COMMENT_COST} 积分`\n    },\n    jp: {\n        overviewsNeedMore: `残高不足です。あと${process.env.NEXT_PUBLIC_OVERVIEW_COST}クレジットが必要です。`,\n        commentsNeedMore: `残高不足です。あと${process.env.NEXT_PUBLIC_COMMENT_COST}クレジットが必要です。`\n    },\n    kr: {\n        overviewsNeedMore: `잔액이 부족합니다. ${process.env.NEXT_PUBLIC_OVERVIEW_COST} 크레딧이 더 필요합니다.`,\n        commentsNeedMore: `잔액이 부족합니다. ${process.env.NEXT_PUBLIC_COMMENT_COST} 크레딧이 더 필요합니다.`\n    },\n    es: {\n        overviewsNeedMore: `¡Ups! Saldo insuficiente. Necesitas ${process.env.NEXT_PUBLIC_OVERVIEW_COST} créditos más.`,\n        commentsNeedMore: `¡Ups! Saldo insuficiente. Necesitas ${process.env.NEXT_PUBLIC_COMMENT_COST} créditos más.`\n    },\n    fr: {\n        overviewsNeedMore: `Oups ! Solde insuffisant. Vous avez besoin de ${process.env.NEXT_PUBLIC_OVERVIEW_COST} crédits supplémentaires.`,\n        commentsNeedMore: `Oups ! Solde insuffisant. Vous avez besoin de ${process.env.NEXT_PUBLIC_COMMENT_COST} crédits supplémentaires.`\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (translations);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdHJhbnNsYXRpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sTUFBTUEsZUFBb0I7SUFDL0JDLElBQUk7UUFDRkMsbUJBQW1CLENBQUMscUNBQXFDLEVBQUVDLFFBQVFDLEdBQUcsQ0FBQ0MseUJBQXlCLENBQUMsY0FBYyxDQUFDO1FBQ2hIQyxrQkFBa0IsQ0FBQyxxQ0FBcUMsRUFBRUgsUUFBUUMsR0FBRyxDQUFDRyx3QkFBd0IsQ0FBQyxjQUFjLENBQUM7SUFDaEg7SUFDQUMsSUFBSTtRQUNGTixtQkFBbUIsQ0FBQyxjQUFjLEVBQUVDLFFBQVFDLEdBQUcsQ0FBQ0MseUJBQXlCLENBQUMsR0FBRyxDQUFDO1FBQzlFQyxrQkFBa0IsQ0FBQyxjQUFjLEVBQUVILFFBQVFDLEdBQUcsQ0FBQ0csd0JBQXdCLENBQUMsR0FBRyxDQUFDO0lBQzlFO0lBQ0FFLElBQUk7UUFDRlAsbUJBQW1CLENBQUMsU0FBUyxFQUFFQyxRQUFRQyxHQUFHLENBQUNDLHlCQUF5QixDQUFDLFdBQVcsQ0FBQztRQUNqRkMsa0JBQWtCLENBQUMsU0FBUyxFQUFFSCxRQUFRQyxHQUFHLENBQUNHLHdCQUF3QixDQUFDLFdBQVcsQ0FBQztJQUNqRjtJQUNBRyxJQUFJO1FBQ0ZSLG1CQUFtQixDQUFDLFdBQVcsRUFBRUMsUUFBUUMsR0FBRyxDQUFDQyx5QkFBeUIsQ0FBQyxjQUFjLENBQUM7UUFDdEZDLGtCQUFrQixDQUFDLFdBQVcsRUFBRUgsUUFBUUMsR0FBRyxDQUFDRyx3QkFBd0IsQ0FBQyxjQUFjLENBQUM7SUFDdEY7SUFDQUksSUFBSTtRQUNGVCxtQkFBbUIsQ0FBQyxvQ0FBb0MsRUFBRUMsUUFBUUMsR0FBRyxDQUFDQyx5QkFBeUIsQ0FBQyxjQUFjLENBQUM7UUFDL0dDLGtCQUFrQixDQUFDLG9DQUFvQyxFQUFFSCxRQUFRQyxHQUFHLENBQUNHLHdCQUF3QixDQUFDLGNBQWMsQ0FBQztJQUMvRztJQUNBSyxJQUFJO1FBQ0ZWLG1CQUFtQixDQUFDLDhDQUE4QyxFQUFFQyxRQUFRQyxHQUFHLENBQUNDLHlCQUF5QixDQUFDLHlCQUF5QixDQUFDO1FBQ3BJQyxrQkFBa0IsQ0FBQyw4Q0FBOEMsRUFBRUgsUUFBUUMsR0FBRyxDQUFDRyx3QkFBd0IsQ0FBQyx5QkFBeUIsQ0FBQztJQUNwSTtBQUNGLEVBQUU7QUFFRixpRUFBZVAsWUFBWUEsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3BoLWNvcGlsb3QtZ3VpZGUtbGFuZGluZy1wYWdlLy4vbGliL3RyYW5zbGF0aW9ucy50cz8zNWE3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB0cmFuc2xhdGlvbnM6IGFueSA9IHtcbiAgZW46IHtcbiAgICBvdmVydmlld3NOZWVkTW9yZTogYE9vcHMhIEluc3VmZmljaWVudCBiYWxhbmNlLiBZb3UgbmVlZCAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX09WRVJWSUVXX0NPU1R9IG1vcmUgY3JlZGl0cy5gLFxuICAgIGNvbW1lbnRzTmVlZE1vcmU6IGBPb3BzISBJbnN1ZmZpY2llbnQgYmFsYW5jZS4gWW91IG5lZWQgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19DT01NRU5UX0NPU1R9IG1vcmUgY3JlZGl0cy5gLFxuICB9LFxuICB6aDoge1xuICAgIG92ZXJ2aWV3c05lZWRNb3JlOiBg56ev5YiG5LiN6Laz77yM5pys5qyh5b+r6K+75Lqn5ZOB6ZyA6KaBICR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfT1ZFUlZJRVdfQ09TVH0g56ev5YiGYCxcbiAgICBjb21tZW50c05lZWRNb3JlOiBg56ev5YiG5LiN6Laz77yM5pys5qyh55Sf5oiQ6K+E6K666ZyA6KaBICR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQ09NTUVOVF9DT1NUfSDnp6/liIZgLFxuICB9LFxuICBqcDoge1xuICAgIG92ZXJ2aWV3c05lZWRNb3JlOiBg5q6L6auY5LiN6Laz44Gn44GZ44CC44GC44GoJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19PVkVSVklFV19DT1NUfeOCr+ODrOOCuOODg+ODiOOBjOW/heimgeOBp+OBmeOAgmAsXG4gICAgY29tbWVudHNOZWVkTW9yZTogYOaui+mrmOS4jei2s+OBp+OBmeOAguOBguOBqCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQ09NTUVOVF9DT1NUfeOCr+ODrOOCuOODg+ODiOOBjOW/heimgeOBp+OBmeOAgmAsXG4gIH0sXG4gIGtyOiB7XG4gICAgb3ZlcnZpZXdzTmVlZE1vcmU6IGDsnpTslaHsnbQg67aA7KGx7ZWp64uI64ukLiAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX09WRVJWSUVXX0NPU1R9IO2BrOugiOuUp+ydtCDrjZQg7ZWE7JqU7ZWp64uI64ukLmAsXG4gICAgY29tbWVudHNOZWVkTW9yZTogYOyelOyVoeydtCDrtoDsobHtlanri4jri6QuICR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQ09NTUVOVF9DT1NUfSDtgazroIjrlKfsnbQg642UIO2VhOyalO2VqeuLiOuLpC5gLFxuICB9LFxuICBlczoge1xuICAgIG92ZXJ2aWV3c05lZWRNb3JlOiBgwqFVcHMhIFNhbGRvIGluc3VmaWNpZW50ZS4gTmVjZXNpdGFzICR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfT1ZFUlZJRVdfQ09TVH0gY3LDqWRpdG9zIG3DoXMuYCxcbiAgICBjb21tZW50c05lZWRNb3JlOiBgwqFVcHMhIFNhbGRvIGluc3VmaWNpZW50ZS4gTmVjZXNpdGFzICR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQ09NTUVOVF9DT1NUfSBjcsOpZGl0b3MgbcOhcy5gLFxuICB9LFxuICBmcjoge1xuICAgIG92ZXJ2aWV3c05lZWRNb3JlOiBgT3VwcyAhIFNvbGRlIGluc3VmZmlzYW50LiBWb3VzIGF2ZXogYmVzb2luIGRlICR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfT1ZFUlZJRVdfQ09TVH0gY3LDqWRpdHMgc3VwcGzDqW1lbnRhaXJlcy5gLFxuICAgIGNvbW1lbnRzTmVlZE1vcmU6IGBPdXBzICEgU29sZGUgaW5zdWZmaXNhbnQuIFZvdXMgYXZleiBiZXNvaW4gZGUgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19DT01NRU5UX0NPU1R9IGNyw6lkaXRzIHN1cHBsw6ltZW50YWlyZXMuYCxcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgdHJhbnNsYXRpb25zIl0sIm5hbWVzIjpbInRyYW5zbGF0aW9ucyIsImVuIiwib3ZlcnZpZXdzTmVlZE1vcmUiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfT1ZFUlZJRVdfQ09TVCIsImNvbW1lbnRzTmVlZE1vcmUiLCJORVhUX1BVQkxJQ19DT01NRU5UX0NPU1QiLCJ6aCIsImpwIiwia3IiLCJlcyIsImZyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/translations.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/formdata-node@4.4.1","vendor-chunks/openai@4.53.2","vendor-chunks/form-data-encoder@1.7.2","vendor-chunks/next@14.1.0_react-dom@18.3.1_react@18.3.1","vendor-chunks/whatwg-url@5.0.0","vendor-chunks/agentkeepalive@4.5.0","vendor-chunks/tr46@0.0.3","vendor-chunks/web-streams-polyfill@4.0.0-beta.3","vendor-chunks/node-fetch@2.7.0","vendor-chunks/webidl-conversions@3.0.1","vendor-chunks/ms@2.1.3","vendor-chunks/humanize-ms@1.2.1","vendor-chunks/event-target-shim@5.0.1","vendor-chunks/abort-controller@3.0.0"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@14.1.0_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-ai-response%2Froute&page=%2Fapi%2Fgenerate-ai-response%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-ai-response%2Froute.ts&appDir=%2FUsers%2Fjanily%2FDesktop%2Fdev%2Frepo-copilot-landingpage%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjanily%2FDesktop%2Fdev%2Frepo-copilot-landingpage&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();